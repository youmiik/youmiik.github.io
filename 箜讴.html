<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>youmi</title>
    <!-- å¼•å…¥JSZipå’ŒFileSaveråº“ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #ffeef8 0%, #ffffff 100%);
            color: #333;
            min-height: 100vh;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        /* ä¾§è¾¹å¯¼èˆªæ  */
        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, #fce4ec 0%, #f8bbd9 100%);
            border-right: 1px solid #f48fb1;
            transition: transform 0.3s ease;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
        }

        .sidebar.collapsed {
            transform: translateX(-240px);
        }

        .sidebar-header {
            padding: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-bottom: 1px solid #f48fb1;
        }

        .sidebar-title {
            color: #ad1457;
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .sidebar-subtitle {
            color: #8e24aa;
            font-size: 12px;
            opacity: 0.8;
        }

        .nav-section {
            margin: 15px 0;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            color: #6a1b9a;
            text-decoration: none;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
            cursor: pointer;
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.3);
            border-left-color: #e91e63;
            color: #ad1457;
        }

        .nav-item.active {
            background: rgba(255, 255, 255, 0.4);
            border-left-color: #e91e63;
            color: #ad1457;
            font-weight: 500;
        }

        .nav-item-icon {
            width: 20px;
            height: 20px;
            margin-right: 12px;
            opacity: 0.7;
        }

        .toggle-btn {
            position: fixed;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: #f48fb1;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            color: white;
            cursor: pointer;
            font-size: 16px;
            z-index: 1001;
            box-shadow: 0 4px 12px rgba(244, 143, 177, 0.3);
            transition: all 0.3s ease;
        }

        .toggle-btn:hover {
            background: #e91e63;
            transform: translateY(-50%) scale(1.1);
        }

        .sidebar.collapsed + .toggle-btn {
            left: 40px;
        }

        /* ä¸»å†…å®¹åŒº */
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 30px;
            transition: margin-left 0.3s ease;
        }

        .main-content.expanded {
            margin-left: 40px;
        }

        .header {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(252, 228, 236, 0.3);
            border: 1px solid rgba(252, 228, 236, 0.2);
        }

        .header h1 {
            color: #ad1457;
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .header p {
            color: #8e24aa;
            font-size: 16px;
            opacity: 0.8;
        }

        .content-section {
            display: none;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(252, 228, 236, 0.3);
            border: 1px solid rgba(252, 228, 236, 0.2);
        }

        .content-section.active {
            display: block;
        }

        .section-title {
            color: #ad1457;
            font-size: 22px;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }

        .section-title::before {
            content: '';
            width: 4px;
            height: 24px;
            background: linear-gradient(180deg, #e91e63, #f48fb1);
            border-radius: 2px;
            margin-right: 12px;
        }

        /* ä¸Šä¼ åŒºåŸŸæ ·å¼ */
        .upload-area {
            border: 2px dashed #f48fb1;
            border-radius: 16px;
            padding: 40px;
            text-align: center;
            background: rgba(252, 228, 236, 0.2);
            transition: all 0.3s ease;
            margin-bottom: 20px;
            cursor: pointer;
        }

        .upload-area:hover {
            border-color: #e91e63;
            background: rgba(252, 228, 236, 0.3);
            transform: translateY(-2px);
        }

        .upload-area.dragover {
            border-color: #e91e63;
            background: rgba(252, 228, 236, 0.4);
            transform: scale(1.02);
        }

        .upload-icon {
            font-size: 48px;
            color: #f48fb1;
            margin-bottom: 15px;
        }

        .upload-text {
            color: #8e24aa;
            font-size: 16px;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .upload-hint {
            color: #ba68c8;
            font-size: 14px;
            opacity: 0.8;
        }

        .file-input {
            display: none;
        }

        /* å¿…ä¼ æ–‡ä»¶åŒºåŸŸ */
        .required-files {
            background: rgba(255, 183, 197, 0.2);
            border: 1px solid #f8bbd9;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .required-files h4 {
            color: #ad1457;
            font-size: 16px;
            margin-bottom: 12px;
            font-weight: 600;
        }

        .file-list-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }

        .required-file-item {
            background: rgba(255, 255, 255, 0.7);
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #f48fb1;
            text-align: center;
            font-size: 12px;
            color: #6a1b9a;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .required-file-item:hover {
            background: rgba(255, 255, 255, 0.9);
            border-color: #e91e63;
            color: #ad1457;
        }

        .file-list {
            margin-top: 20px;
        }

        .file-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background: rgba(252, 228, 236, 0.3);
            border-radius: 12px;
            margin-bottom: 8px;
            border: 1px solid rgba(252, 228, 236, 0.2);
        }

        .file-info {
            display: flex;
            align-items: center;
        }

        .file-icon {
            width: 20px;
            height: 20px;
            margin-right: 8px;
            opacity: 0.6;
        }

        .file-name {
            color: #6a1b9a;
            font-size: 14px;
            font-weight: 500;
        }

        .file-actions {
            display: flex;
            gap: 8px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(135deg, #f48fb1, #e91e63);
            color: white;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #e91e63, #ad1457);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(233, 30, 99, 0.3);
        }

        .btn-secondary {
            background: rgba(252, 228, 236, 0.8);
            color: #8e24aa;
            border: 1px solid #f48fb1;
        }

        .btn-secondary:hover {
            background: rgba(252, 228, 236, 1);
            color: #ad1457;
        }

        .btn-success {
            background: linear-gradient(135deg, #81c784, #4caf50);
            color: white;
            font-weight: 600;
            padding: 12px 24px;
        }

        .btn-success:hover {
            background: linear-gradient(135deg, #4caf50, #388e3c);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .special-upload {
            background: rgba(255, 235, 238, 0.5);
            border: 2px dashed #f8bbd9;
            margin-top: 15px;
            padding: 20px;
            border-radius: 12px;
        }

        .special-upload h4 {
            color: #ad1457;
            font-size: 14px;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .special-upload p {
            color: #8e24aa;
            font-size: 12px;
            margin-bottom: 10px;
        }

        .format-list {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-top: 8px;
        }

        .format-tag {
            background: rgba(244, 143, 177, 0.2);
            color: #8e24aa;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 10px;
            font-weight: 500;
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: rgba(252, 228, 236, 0.3);
            border-radius: 2px;
            margin: 15px 0;
            overflow: hidden;
            display: none;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #f48fb1, #e91e63);
            border-radius: 2px;
            width: 0%;
            transition: width 0.3s ease;
        }

        .status-message {
            padding: 12px 16px;
            border-radius: 8px;
            margin: 10px 0;
            font-size: 14px;
            display: none;
        }

        .status-success {
            background: rgba(76, 175, 80, 0.1);
            color: #2e7d32;
            border: 1px solid rgba(76, 175, 80, 0.3);
        }

        .status-error {
            background: rgba(244, 67, 54, 0.1);
            color: #c62828;
            border: 1px solid rgba(244, 67, 54, 0.3);
        }

        /* ä¸‹è½½è¿›åº¦æ¨¡æ€æ¡† */
        .download-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .download-modal-content {
            background: white;
            border-radius: 16px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .download-icon {
            font-size: 48px;
            margin-bottom: 20px;
            color: #4caf50;
        }

        .download-title {
            color: #ad1457;
            font-size: 22px;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .download-details {
            color: #8e24aa;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .download-progress {
            width: 100%;
            height: 8px;
            background: #f0f0f0;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .download-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #81c784, #4caf50);
            border-radius: 4px;
            width: 0%;
            transition: width 0.3s ease;
        }

        .download-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            color: #8e24aa;
            font-size: 14px;
        }

        /* åº•éƒ¨æ ‡ç­¾å›¾æ ‡ç»„æ ·å¼ */
        .bottom-tab-group {
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid #f8bbd9;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .bottom-tab-group h5 {
            color: #ad1457;
            font-size: 14px;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .file-pair {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
        }

        .file-pair-item {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .file-pair-label {
            min-width: 120px;
            color: #6a1b9a;
            font-size: 12px;
            font-weight: 500;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 10px 0;
        }

        .checkbox-group input[type="checkbox"] {
            width: 16px;
            height: 16px;
        }

        .checkbox-group label {
            color: #8e24aa;
            font-size: 12px;
            cursor: pointer;
        }

        .upload-btn {
            padding: 6px 12px;
            background: rgba(244, 143, 177, 0.2);
            border: 1px solid #f48fb1;
            border-radius: 6px;
            color: #8e24aa;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .upload-btn:hover {
            background: rgba(244, 143, 177, 0.4);
            border-color: #e91e63;
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-240px);
            }
            
            .sidebar:not(.collapsed) {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
                padding: 20px;
            }
            
            .main-content.expanded {
                margin-left: 0;
            }
            
            .file-pair {
                flex-direction: column;
                gap: 8px;
            }
            
            .file-pair-label {
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ä¾§è¾¹å¯¼èˆªæ  -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">ä¸»é¢˜åˆ¶ä½œå·¥å…·</div>
                <div class="sidebar-subtitle">ä¸Šä¼ æ–‡ä»¶åˆ¶ä½œä¸ªæ€§åŒ–ä¸»é¢˜</div>
            </div>
            
            <div class="nav-section">
                <div class="nav-item active" data-section="icons">
                    <span class="nav-item-icon">ğŸ¨</span>
                    <span>Icons å›¾æ ‡æ–‡ä»¶</span>
                </div>
                <div class="nav-item" data-section="images">
                    <span class="nav-item-icon">ğŸ–¼ï¸</span>
                    <span>Images å›¾åƒæ–‡ä»¶</span>
                </div>
                <div class="nav-item" data-section="settings">
                    <span class="nav-item-icon">âš™ï¸</span>
                    <span>Settings é…ç½®æ–‡ä»¶</span>
                </div>
            </div>
        </div>

        <!-- åˆ‡æ¢æŒ‰é’® -->
        <button class="toggle-btn" id="toggleBtn">â˜°</button>

        <!-- ä¸»å†…å®¹åŒº -->
        <div class="main-content" id="mainContent">
            <div class="header">
                <h1>ä¸»é¢˜åˆ¶ä½œå·¥å…·</h1>
                <p>ä¸Šä¼ å¯¹åº”çš„å›¾åƒå’Œé…ç½®æ–‡ä»¶ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨å¤„ç†å¹¶æ‰“åŒ…æˆzipå‹ç¼©åŒ…</p>
            </div>

            <!-- Icons åŒºåŸŸ -->
            <div class="content-section active" id="icons">
                <h2 class="section-title">Icons å›¾æ ‡æ–‡ä»¶ä¸Šä¼ </h2>
                <p style="color: #8e24aa; margin-bottom: 20px; line-height: 1.6;">
                    è¯·ä¸Šä¼ å›¾æ ‡åŒºåŸŸéœ€è¦çš„PNGæ ¼å¼å›¾åƒæ–‡ä»¶ã€‚ç³»ç»Ÿå°†æŒ‰ä¸Šä¼ é¡ºåºè‡ªåŠ¨åŒ¹é…é¢„å®šä¹‰æ–‡ä»¶åã€‚
                </p>

                <!-- åº•éƒ¨æ ‡ç­¾å›¾æ ‡åˆ†ç»„ä¸Šä¼ åŒºåŸŸ -->
                <div class="special-upload">
                    <h4>ğŸ¯ åº•éƒ¨æ ‡ç­¾å›¾æ ‡ä¸Šä¼  (åˆ†ç»„ä¸Šä¼ )</h4>
                    <p style="color: #8e24aa; margin-bottom: 10px; font-size: 14px;">
                        ä»¥ä¸‹8ä¸ªåº•éƒ¨æ ‡ç­¾å›¾æ ‡åˆ†ä¸º4ç»„ï¼Œå½“åŒä¸€ç»„çš„ä¸¤ä¸ªæ–‡ä»¶ç›¸åŒæ—¶ï¼Œåªéœ€ä¸Šä¼ ä¸€æ¬¡
                    </p>

                    <!-- ç¬¬1ç»„ -->
                    <div class="bottom-tab-group">
                        <h5>ğŸ“± è”ç³»äººæ ‡ç­¾</h5>
                        <div class="checkbox-group">
                            <input type="checkbox" id="group1Same" onchange="toggleSameFileUpload(1)">
                            <label for="group1Same">ä¸¤ä¸ªæ–‡ä»¶ç›¸åŒï¼ˆå‹¾é€‰ååªéœ€ä¸Šä¼ ä¸€æ¬¡ï¼‰</label>
                        </div>
                        <div class="file-pair">
                            <div class="file-pair-item">
                                <span class="file-pair-label">BottomTabContactsIconFocus.png</span>
                                <button class="upload-btn" onclick="uploadBottomTabFile(1, 'focus')">é€‰æ‹©æ–‡ä»¶</button>
                                <span id="group1FocusStatus" style="font-size: 12px; color: #8e24aa;"></span>
                            </div>
                            <div class="file-pair-item">
                                <span class="file-pair-label">BottomTabContactsIconNormal.png</span>
                                <button class="upload-btn" onclick="uploadBottomTabFile(1, 'normal')">é€‰æ‹©æ–‡ä»¶</button>
                                <span id="group1NormalStatus" style="font-size: 12px; color: #8e24aa;"></span>
                            </div>
                        </div>
                    </div>

                    <!-- ç¬¬2ç»„ -->
                    <div class="bottom-tab-group">
                        <h5>ğŸ” å‘ç°æ ‡ç­¾</h5>
                        <div class="checkbox-group">
                            <input type="checkbox" id="group2Same" onchange="toggleSameFileUpload(2)">
                            <label for="group2Same">ä¸¤ä¸ªæ–‡ä»¶ç›¸åŒï¼ˆå‹¾é€‰ååªéœ€ä¸Šä¼ ä¸€æ¬¡ï¼‰</label>
                        </div>
                        <div class="file-pair">
                            <div class="file-pair-item">
                                <span class="file-pair-label">BottomTabDiscoverIconFocus.png</span>
                                <button class="upload-btn" onclick="uploadBottomTabFile(2, 'focus')">é€‰æ‹©æ–‡ä»¶</button>
                                <span id="group2FocusStatus" style="font-size: 12px; color: #8e24aa;"></span>
                            </div>
                            <div class="file-pair-item">
                                <span class="file-pair-label">BottomTabDiscoverIconNormal.png</span>
                                <button class="upload-btn" onclick="uploadBottomTabFile(2, 'normal')">é€‰æ‹©æ–‡ä»¶</button>
                                <span id="group2NormalStatus" style="font-size: 12px; color: #8e24aa;"></span>
                            </div>
                        </div>
                    </div>

                    <!-- ç¬¬3ç»„ -->
                    <div class="bottom-tab-group">
                        <h5>ğŸ‘¤ æˆ‘çš„æ ‡ç­¾</h5>
                        <div class="checkbox-group">
                            <input type="checkbox" id="group3Same" onchange="toggleSameFileUpload(3)">
                            <label for="group3Same">ä¸¤ä¸ªæ–‡ä»¶ç›¸åŒï¼ˆå‹¾é€‰ååªéœ€ä¸Šä¼ ä¸€æ¬¡ï¼‰</label>
                        </div>
                        <div class="file-pair">
                            <div class="file-pair-item">
                                <span class="file-pair-label">BottomTabMeIconFocus.png</span>
                                <button class="upload-btn" onclick="uploadBottomTabFile(3, 'focus')">é€‰æ‹©æ–‡ä»¶</button>
                                <span id="group3FocusStatus" style="font-size: 12px; color: #8e24aa;"></span>
                            </div>
                            <div class="file-pair-item">
                                <span class="file-pair-label">BottomTabMeIconNormal.png</span>
                                <button class="upload-btn" onclick="uploadBottomTabFile(3, 'normal')">é€‰æ‹©æ–‡ä»¶</button>
                                <span id="group3NormalStatus" style="font-size: 12px; color: #8e24aa;"></span>
                            </div>
                        </div>
                    </div>

                    <!-- ç¬¬4ç»„ -->
                    <div class="bottom-tab-group">
                        <h5>ğŸ’¬ èŠå¤©æ ‡ç­¾</h5>
                        <div class="checkbox-group">
                            <input type="checkbox" id="group4Same" onchange="toggleSameFileUpload(4)">
                            <label for="group4Same">ä¸¤ä¸ªæ–‡ä»¶ç›¸åŒï¼ˆå‹¾é€‰ååªéœ€ä¸Šä¼ ä¸€æ¬¡ï¼‰</label>
                        </div>
                        <div class="file-pair">
                            <div class="file-pair-item">
                                <span class="file-pair-label">BottomTabMechatIconFocus.png</span>
                                <button class="upload-btn" onclick="uploadBottomTabFile(4, 'focus')">é€‰æ‹©æ–‡ä»¶</button>
                                <span id="group4FocusStatus" style="font-size: 12px; color: #8e24aa;"></span>
                            </div>
                            <div class="file-pair-item">
                                <span class="file-pair-label">BottomTabMechatIconNormal.png</span>
                                <button class="upload-btn" onclick="uploadBottomTabFile(4, 'normal')">é€‰æ‹©æ–‡ä»¶</button>
                                <span id="group4NormalStatus" style="font-size: 12px; color: #8e24aa;"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- .nomediaæ–‡ä»¶ä¸Šä¼  -->
                <div class="special-upload">
                    <h4>ğŸ“ .nomedia æ–‡ä»¶ä¸Šä¼ </h4>
                    <p style="color: #8e24aa; margin-bottom: 10px; font-size: 14px;">
                        ä¸Šä¼ .nomediaæ–‡ä»¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åœ¨iconså’Œimagesæ–‡ä»¶å¤¹ä¸­éƒ½åˆ›å»ºæ­¤æ–‡ä»¶
                    </p>
                    <div class="upload-area" onclick="document.getElementById('nomediaInput').click()" style="border-color: #e1f5fe; background: rgba(225, 245, 254, 0.3);">
                        <div class="upload-icon">ğŸ“„</div>
                        <div class="upload-text">ç‚¹å‡»ä¸Šä¼  .nomedia æ–‡ä»¶</div>
                        <div class="upload-hint">ä¸Šä¼ åä¼šåœ¨ä¸¤ä¸ªæ¨¡å—ä¸­éƒ½åˆ›å»ºæ­¤æ–‡ä»¶</div>
                    </div>
                    <input type="file" id="nomediaInput" class="file-input" accept="*" onchange="handleNomediaUpload(event)">
                </div>

                <!-- å¿…ä¼ æ–‡ä»¶æé†’ -->
                <div class="required-files">
                    <h4>ğŸ“Œ å¿…é¡»ä¸Šä¼ çš„æ–‡ä»¶ (ç‚¹å‡»ä¸‹æ–¹åŒºåŸŸä¸Šä¼ )</h4>
                    <div class="file-list-grid">
                        <div class="required-file-item" onclick="uploadRequiredFile('ic_åŠ å¥½å‹.png', 'icons')">ic_åŠ å¥½å‹.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('ic_åç‰‡.png', 'icons')">ic_åç‰‡.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('ic_æœ‹å‹åœˆ.png', 'icons')">ic_æœ‹å‹åœˆ.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('ic_é’±åŒ….png', 'icons')">ic_é’±åŒ….png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('ic_ç¾¤èŠ.png', 'icons')">ic_ç¾¤èŠ.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('ic_æ‰«ä¸€æ‰«.png', 'icons')">ic_æ‰«ä¸€æ‰«.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('ic_æ”¶è—.png', 'icons')">ic_æ”¶è—.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('ic_æ”¶ä»˜æ¬¾.png', 'icons')">ic_æ”¶ä»˜æ¬¾.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('ic_æœç´¢.png', 'icons')">ic_æœç´¢.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('ic_å¾®X.png', 'icons')">ic_å¾®X.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('ic_æˆ‘çš„ç›¸å†Œ.png', 'icons')">ic_æˆ‘çš„ç›¸å†Œ.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('ic_æ‘‡ä¸€æ‘‡.png', 'icons')">ic_æ‘‡ä¸€æ‘‡.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('ico.png', 'icons')">ico.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('icon_mini.png', 'icons')">icon_mini.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('icon_mini2860.png', 'icons')">icon_mini2860.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('kingdom_hearts_union_x_alt.png', 'icons')">kingdom_hearts_union_x_alt.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('tab_icon2.png', 'icons')">tab_icon2.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('TabContacts.png', 'icons')">TabContacts.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('TabLayoutContactsIcon.png', 'icons')">TabLayoutContactsIcon.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('TabLayoutDiscoverIcon.png', 'icons')">TabLayoutDiscoverIcon.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('TabLayoutMeIcon.png', 'icons')">TabLayoutMeIcon.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('TabLayoutMechatIcon.png', 'icons')">TabLayoutMechatIcon.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('vcard_12px_26829_easvicon.net.png', 'icons')">vcard_12px_26829_easvicon.net.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('è¡¨æƒ…å•†åº—.png', 'icons')">è¡¨æƒ…å•†åº—.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('åç‰‡-12x12.png', 'icons')">åç‰‡-12x12.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('è®¾ç½®.png', 'icons')">è®¾ç½®.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('æ”¶ä»˜æ¬¾.png', 'icons')">æ”¶ä»˜æ¬¾.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('æ”¶ä»˜æ¬¾~01-72x72.png', 'icons')">æ”¶ä»˜æ¬¾~01-72x72.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('æœä¸€æœ.png', 'icons')">æœä¸€æœ.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('æ¸¸æˆ.png', 'icons')">æ¸¸æˆ.png</div> 
                        <div class="required-file-item" onclick="uploadRequiredFile('chatfooter_keyboard.png'ï¼Œ'icons')">chatfooter_keyboard.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('chatfooter_plus.png'ï¼Œ'icons')">chatfooter_plus.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('chatfooter_mic.png'ï¼Œ'icons')">chatfooter_mic.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('chatfooter_send.png'ï¼Œ'icons')">chatfooter_send.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('chatfooter_smiley.png'ï¼Œ'icons')">chatfooter_smiley.png</div>
                    </div>
                </div>

                <!-- æ‰¹é‡ä¸Šä¼ åŒºåŸŸ -->
                <div class="upload-area" onclick="document.getElementById('iconsFileInput').click()" style="border-color: #f48fb1;">
                    <div class="upload-icon">ğŸ“</div>
                    <div class="upload-text">ç‚¹å‡»ä¸Šä¼ å…¶ä»–å›¾æ ‡æ–‡ä»¶ (æ”¯æŒæ‰¹é‡)</div>
                    <div class="upload-hint">æ”¯æŒæ‰¹é‡ä¸Šä¼ PNGæ–‡ä»¶ï¼Œç³»ç»Ÿå°†æŒ‰é¡ºåºè‡ªåŠ¨åŒ¹é…é¢„å®šä¹‰æ–‡ä»¶å</div>
                </div>
                <input type="file" id="iconsFileInput" class="file-input" multiple accept=".png" onchange="handleIconsUpload(event)">

                <div class="file-list" id="iconsFileList"></div>
                <div class="progress-bar" id="iconsProgressBar">
                    <div class="progress-fill" id="iconsProgressFill"></div>
                </div>
                <div class="status-message" id="iconsStatusMessage"></div>

                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn btn-success" onclick="generateTheme()">ç”Ÿæˆä¸»é¢˜åŒ…</button>
                </div>
            </div>

            <!-- Images åŒºåŸŸ -->
            <div class="content-section" id="images">
                <h2 class="section-title">Images å›¾åƒæ–‡ä»¶ä¸Šä¼ </h2>
                <p style="color: #8e24aa; margin-bottom: 20px; line-height: 1.6;">
                    è¯·ä¸Šä¼ å›¾åƒåŒºåŸŸéœ€è¦çš„PNGæ ¼å¼å›¾åƒã€.9æ ¼å¼æ°”æ³¡æ–‡ä»¶å’ŒèŠå¤©æ ç›¸å…³å›¾åƒã€‚ç³»ç»Ÿå°†æŒ‰ä¸Šä¼ é¡ºåºè‡ªåŠ¨åŒ¹é…é¢„å®šä¹‰æ–‡ä»¶åã€‚
                </p>

                <!-- .nomediaæ–‡ä»¶ä¸Šä¼  -->
                <div class="special-upload">
                    <h4>ğŸ“ .nomedia æ–‡ä»¶ä¸Šä¼ </h4>
                    <p style="color: #8e24aa; margin-bottom: 10px; font-size: 14px;">
                        ä¸Šä¼ .nomediaæ–‡ä»¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åœ¨iconså’Œimagesæ–‡ä»¶å¤¹ä¸­éƒ½åˆ›å»ºæ­¤æ–‡ä»¶
                    </p>
                    <div class="upload-area" onclick="document.getElementById('nomediaInputImages').click()" style="border-color: #e1f5fe; background: rgba(225, 245, 254, 0.3);">
                        <div class="upload-icon">ğŸ“„</div>
                        <div class="upload-text">ç‚¹å‡»ä¸Šä¼  .nomedia æ–‡ä»¶</div>
                        <div class="upload-hint">ä¸Šä¼ åä¼šåœ¨ä¸¤ä¸ªæ¨¡å—ä¸­éƒ½åˆ›å»ºæ­¤æ–‡ä»¶</div>
                    </div>
                    <input type="file" id="nomediaInputImages" class="file-input" accept="*" onchange="handleNomediaUpload(event)">
                </div>

                <!-- å¿…ä¼ æ–‡ä»¶æé†’ -->
                <div class="required-files">
                    <h4>ğŸ“Œ å¿…é¡»ä¸Šä¼ çš„ç‰¹æ®Šæ–‡ä»¶ (è¯·å•ç‹¬ä¸Šä¼ )</h4>
                    <div class="file-list-grid">
                        <div class="required-file-item" onclick="uploadRequiredFile('left_bubble_9.png', 'images')">left_bubble_9.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('right_bubble_9.png', 'images')">right_bubble_9.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('chatfooter_edit_bg.png', 'images')">chatfooter_edit_bg.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('drawer_bg_whole.png', 'images')">drawer_bg_whole.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('èƒŒæ™¯å›¾1.png', 'images')">èƒŒæ™¯å›¾1.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('èƒŒæ™¯å›¾2.png', 'images')">èƒŒæ™¯å›¾2.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('èƒŒæ™¯å›¾3.png', 'images')">èƒŒæ™¯å›¾3.png</div>
                        <div class="required-file-item" onclick="uploadRequiredFile('èƒŒæ™¯å›¾4.png', 'images')">èƒŒæ™¯å›¾4.png</div>
                    </div>
                </div>

                <!-- å•ç‹¬ä¸Šä¼ åŒºåŸŸ -->
                <div class="special-upload">
                    <h4>ğŸ¯ é‡è¦æ–‡ä»¶å•ç‹¬ä¸Šä¼ </h4>
                    
                    <div style="margin: 15px 0;">
                        <h4 style="color: #ad1457; font-size: 14px; margin-bottom: 8px;">â€¢ æ°”æ³¡æ–‡ä»¶ (.9æ ¼å¼)</h4>
                        <div class="upload-area" onclick="document.getElementById('bubbleInput').click()" style="margin-top: 8px; border-color: #e1f5fe; background: rgba(225, 245, 254, 0.3);">
                            <div class="upload-icon">ğŸ’¬</div>
                            <div class="upload-text">ä¸Šä¼ æ°”æ³¡æ–‡ä»¶</div>
                            <div class="upload-hint">left_bubble_9.png å’Œ right_bubble_9.png</div>
                        </div>
                        <input type="file" id="bubbleInput" class="file-input" multiple accept=".png" onchange="handleBubbleUpload(event)">
                    </div>

                    <div style="margin: 15px 0;">
                        <h4 style="color: #ad1457; font-size: 14px; margin-bottom: 8px;">â€¢ èŠå¤©ç¼–è¾‘èƒŒæ™¯</h4>
                        <div class="upload-area" onclick="document.getElementById('chatEditInput').click()" style="margin-top: 8px; border-color: #fff3e0; background: rgba(255, 243, 224, 0.3);">
                            <div class="upload-icon">âœï¸</div>
                            <div class="upload-text">ä¸Šä¼ èŠå¤©ç¼–è¾‘èƒŒæ™¯</div>
                            <div class="upload-hint">chatfooter_edit_bg.png</div>
                        </div>
                        <input type="file" id="chatEditInput" class="file-input" accept=".png" onchange="handleChatEditUpload(event)">
                    </div>
                </div>

                <!-- æ‰¹é‡ä¸Šä¼ åŒºåŸŸ -->
                <div class="upload-area" onclick="document.getElementById('imagesFileInput').click()" style="border-color: #f48fb1; margin-top: 20px;">
                    <div class="upload-icon">ğŸ–¼ï¸</div>
                    <div class="upload-text">ç‚¹å‡»ä¸Šä¼ å…¶ä»–å›¾åƒæ–‡ä»¶ (æ”¯æŒæ‰¹é‡)</div>
                    <div class="upload-hint">æ”¯æŒæ‰¹é‡ä¸Šä¼ PNGã€JPGã€JPEGã€WEBPç­‰æ ¼å¼ï¼Œç³»ç»Ÿå°†æŒ‰é¡ºåºè‡ªåŠ¨åŒ¹é…é¢„å®šä¹‰æ–‡ä»¶å</div>
                </div>
                <input type="file" id="imagesFileInput" class="file-input" multiple onchange="handleImagesUpload(event)">

                <div class="format-list">
                    <span class="format-tag">PNG</span>
                    <span class="format-tag">JPG</span>
                    <span class="format-tag">JPEG</span>
                    <span class="format-tag">WEBP</span>
                    <span class="format-tag">.9</span>
                </div>

                <div class="file-list" id="imagesFileList"></div>
                <div class="progress-bar" id="imagesProgressBar">
                    <div class="progress-fill" id="imagesProgressFill"></div>
                </div>
                <div class="status-message" id="imagesStatusMessage"></div>

                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn btn-success" onclick="generateTheme()">ç”Ÿæˆä¸»é¢˜åŒ…</button>
                </div>
            </div>

            <!-- Settings åŒºåŸŸ -->
            <div class="content-section" id="settings">
                <h2 class="section-title">Settings é…ç½®æ–‡ä»¶</h2>
                <p style="color: #8e24aa; margin-bottom: 20px; line-height: 1.6;">
                    ä¸Šä¼ æˆ–ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶ã€‚æ‚¨å¯ä»¥é€‰æ‹©ä¸Šä¼ è‡ªå®šä¹‰çš„settings.jsonæ–‡ä»¶ï¼Œæˆ–ä½¿ç”¨é»˜è®¤é…ç½®ã€‚
                </p>

                <!-- é»˜è®¤é…ç½®åŒºåŸŸ -->
                <div class="required-files">
                    <h4>ğŸ“‹ é»˜è®¤é…ç½®æ–‡ä»¶</h4>
                    <p style="color: #8e24aa; margin-bottom: 12px; font-size: 14px;">
                        ç³»ç»Ÿå·²æä¾›é»˜è®¤çš„settings.jsoné…ç½®æ–‡ä»¶ã€‚å¦‚éœ€è‡ªå®šä¹‰ï¼Œè¯·ä¸Šä¼ æ‚¨è‡ªå·±çš„é…ç½®æ–‡ä»¶ã€‚
                    </p>
                    <div class="file-item">
                        <div class="file-info">
                            <span class="file-icon">ğŸ“„</span>
                            <span class="file-name">settings.json (é»˜è®¤)</span>
                        </div>
                        <div class="file-actions">
                            <button class="btn btn-secondary" onclick="viewDefaultSettings()">æŸ¥çœ‹</button>
                        </div>
                    </div>
                </div>

                <!-- è‡ªå®šä¹‰ä¸Šä¼ åŒºåŸŸ -->
                <div class="upload-area" onclick="document.getElementById('settingsFileInput').click()" style="border-color: #f48fb1; margin-top: 20px;">
                    <div class="upload-icon">âš™ï¸</div>
                    <div class="upload-text">ä¸Šä¼ è‡ªå®šä¹‰ settings.json æ–‡ä»¶</div>
                    <div class="upload-hint">ä¸Šä¼ è‡ªå®šä¹‰çš„é…ç½®æ–‡ä»¶ä»¥è¦†ç›–é»˜è®¤è®¾ç½®</div>
                </div>
                <input type="file" id="settingsFileInput" class="file-input" accept=".json" onchange="handleSettingsUpload(event)">

                <div class="file-list" id="settingsFileList"></div>
                <div class="status-message" id="settingsStatusMessage"></div>

                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn btn-success" onclick="generateTheme()">ç”Ÿæˆä¸»é¢˜åŒ…</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ä¸‹è½½è¿›åº¦æ¨¡æ€æ¡† -->
    <div class="download-modal" id="downloadModal">
        <div class="download-modal-content">
            <div class="download-icon">ğŸ“¦</div>
            <div class="download-title">æ­£åœ¨ç”Ÿæˆä¸»é¢˜åŒ…</div>
            <div class="download-details" id="downloadDetails">æ­£åœ¨æ‰“åŒ…æ–‡ä»¶ï¼Œè¯·ç¨å€™...</div>
            
            <div class="download-progress">
                <div class="download-progress-bar" id="downloadProgressBar"></div>
            </div>
            
            <div class="download-stats">
                <span id="currentFile">å‡†å¤‡ä¸­...</span>
                <span id="progressPercent">0%</span>
            </div>
            
            <button class="btn btn-primary" id="downloadBtn" style="display: none;" onclick="closeDownloadModal()">å®Œæˆ</button>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡å­˜å‚¨ä¸Šä¼ çš„æ–‡ä»¶
        const uploadedFiles = {
            icons: {},
            images: {},
            settings: {},
            nomedia: null // å­˜å‚¨.nomediaæ–‡ä»¶
        };

        // ç”¨äºè·Ÿè¸ªå·²åŒ¹é…çš„æ–‡ä»¶å
        const matchedFiles = {
            icons: new Set(),
            images: new Set()
        };

        // åº•éƒ¨æ ‡ç­¾å›¾æ ‡åˆ†ç»„é…ç½®
        const bottomTabGroups = {
            1: {
                focus: 'BottomTabContactsIconFocus.png',
                normal: 'BottomTabContactsIconNormal.png',
                same: false
            },
            2: {
                focus: 'BottomTabDiscoverIconFocus.png',
                normal: 'BottomTabDiscoverIconNormal.png',
                same: false
            },
            3: {
                focus: 'BottomTabMeIconFocus.png',
                normal: 'BottomTabMeIconNormal.png',
                same: false
            },
            4: {
                focus: 'BottomTabMechatIconFocus.png',
                normal: 'BottomTabMechatIconNormal.png',
                same: false
            }
        };

        // é¢„å®šä¹‰çš„æ–‡ä»¶åæ˜ å°„
        const fileMappings = {
            icons: [
                'BottomTabContactsIconFocus.png',
                'BottomTabContactsIconNormal.png',
                'BottomTabDiscoverIconFocus.png',
                'BottomTabDiscoverIconNormal.png',
                'BottomTabMeIconFocus.png',
                'BottomTabMeIconNormal.png',
                'BottomTabMechatIconFocus.png',
                'BottomTabMechatIconNormal.png',
                'ic_åŠ å¥½å‹.png',
                'ic_åç‰‡.png',
                'ic_æœ‹å‹åœˆ.png',
                'ic_é’±åŒ….png',
                'ic_ç¾¤èŠ.png',
                'ic_æ‰«ä¸€æ‰«.png',
                'ic_æ”¶è—.png',
                'ic_æ”¶ä»˜æ¬¾.png',
                'ic_æœç´¢.png',
                'ic_å¾®X.png',
                'ic_æˆ‘çš„ç›¸å†Œ.png',
                'ic_æ‘‡ä¸€æ‘‡.png',
                'ico.png',
                'icon_mini.png',
                'icon_mini2860.png',
                'kingdom_hearts_union_x_alt.png',
                'tab_icon2.png',
                'TabContacts.png',
                'TabLayoutContactsIcon.png',
                'TabLayoutDiscoverIcon.png',
                'TabLayoutMeIcon.png',
                'TabLayoutMechatIcon.png',
                'vcard_12px_26829_easvicon.net.png',
                'è¡¨æƒ…å•†åº—.png',
                'åç‰‡-12x12.png',
                'è®¾ç½®.png',
                'æ”¶ä»˜æ¬¾.png',
                'æ”¶ä»˜æ¬¾~01-72x72.png',
                'æœä¸€æœ.png',
                'æ¸¸æˆ.png',
                'chatfooter_keyboard.png',
                'chatfooter_plus.png',
                'chatfooter_mic.png',
                'chatfooter_send.png',
                'chatfooter_smiley.png'
            ],
            images: [
                'left_bubble_9.png',
                'right_bubble_9.png',
                'chatfooter_edit_bg.png',
                'drawer_bg_whole.png',
                'èƒŒæ™¯å›¾1.png',
                'èƒŒæ™¯å›¾2.png',
                'èƒŒæ™¯å›¾3.png',
                'èƒŒæ™¯å›¾4.png'
            ]
        };

        // é»˜è®¤é…ç½®æ–‡ä»¶ - ä½¿ç”¨æ‚¨æä¾›çš„settings.json
        const defaultSettings = {
            "ChangeActionBarColor": true,
            "ActionBarColor": "86AFBA",
            "TabLayoutEnable": false,
            "TabLayoutColor": "86AFBA",
            "HideActionBar": false,
            "TabLayoutCustomTopMarginEnable": true,
            "TabLayoutCustomTopMargin": 992,
            "TabLayoutTextEnable": true,
            "ChangeBottomTabColor": false,
            "BottomTabColor": "00FFFFFF",
            "BottomTabIconColorNormal": "00FFFFFF",
            "BottomTabIconColorEnable": true,
            "HideBottomTab": false,
            "UseRoundAvatar": true,
            "ChangeChatBubble": true,
            "HideActionBarPlusMenu": false,
            "HideActionBarSearchMenu": false,
            "RecentChatFloatingActionButtonEnable": false,
            "FloatingActionButtonEnable": true,
            "FloatingActionMenuShowLabelOnRight": false,
            "FloatingActionMenuIcon": "kingdom_hearts_union_x_alt.png",
            "FloatingActionMenuColor": "00ffffff",
            "FloatingActionButton": {
                "items": [
                    {
                        "text": "åä¿¡ç‰‡",
                        "order": 0,
                        "icon": "ico.png",
                        "type": "qrcode",
                        "action": "",
                        "colorizeIcon": false,
                        "iconColor": "FFFEFEFE",
                        "enable": true
                    },
                    {
                        "text": "åŠ å¥½å‹",
                        "order": 1,
                        "icon": "ic_åŠ å¥½å‹.png",
                        "type": "addfriend",
                        "action": "",
                        "colorizeIcon": false,
                        "iconColor": "",
                        "enable": true
                    },
                    {
                        "text": "æ‰«ä¸€æ‰«",
                        "order": 2,
                        "icon": "ic_æ‰«ä¸€æ‰«.png",
                        "type": "scan",
                        "action": "",
                        "colorizeIcon": false,
                        "iconColor": "",
                        "enable": true
                    },
                    {
                        "text": "æ”¶ä»˜æ¬¾",
                        "order": 3,
                        "icon": "æ”¶ä»˜æ¬¾~01-72x72.png",
                        "type": "walletcoin",
                        "action": "",
                        "colorizeIcon": false,
                        "iconColor": "",
                        "enable": true
                    },
                    {
                        "text": "å¾®é’±åŒ…",
                        "order": 4,
                        "icon": "ic_é’±åŒ….png",
                        "type": "wallet",
                        "action": "",
                        "colorizeIcon": false,
                        "iconColor": "",
                        "enable": true
                    },
                    {
                        "text": "å¾®è®¾ç½®",
                        "order": 5,
                        "icon": "è®¾ç½®.png",
                        "type": "settings",
                        "action": "",
                        "colorizeIcon": false,
                        "iconColor": "",
                        "enable": true
                    },
                    {
                        "text": "æœ‹å‹åœˆ",
                        "order": 6,
                        "icon": "ic_æœ‹å‹åœˆ.png",
                        "type": "timeline",
                        "action": "",
                        "colorizeIcon": false,
                        "iconColor": "",
                        "enable": true
                    },
                    {
                        "text": "å…¨å·²è¯»",
                        "order": 7,
                        "icon": "ic_ç¾¤èŠ.png",
                        "type": "wx_config_mark_read",
                        "action": "",
                        "colorizeIcon": false,
                        "iconColor": "",
                        "enable": true
                    },
                    {
                        "text": "X è®¾ç½®",
                        "order": 8,
                        "icon": "icon_mini2860.png",
                        "type": "wx_config_app",
                        "action": "",
                        "colorizeIcon": false,
                        "iconColor": "FFFFFFFF",
                        "enable": true
                    }
                ]
            },
            "MainFragmentBackgroundEnable": true,
            "MainFragmentBackground": [
                {
                    "e": true,
                    "p": "èƒŒæ™¯å›¾2.png",
                    "b": 0,
                    "c": "#00FFFFFF"
                }
            ],
            "ContactFragmentBackgroundEnable": true,
            "ContactFragmentBackground": [
                {
                    "e": true,
                    "p": "èƒŒæ™¯å›¾1.png",
                    "b": 0,
                    "c": "#00FFFFFF"
                }
            ],
            "DiscoverFragmentBackgroundEnable": true,
            "DiscoverFragmentBackground": [
                {
                    "e": true,
                    "p": "èƒŒæ™¯å›¾3.png",
                    "b": 0,
                    "c": "#00FFFFFF"
                }
            ],
            "MeFragmentBackgroundEnable": true,
            "MeFragmentBackground": [
                {
                    "e": true,
                    "p": "èƒŒæ™¯å›¾4.png",
                    "b": 0,
                    "c": "#00FFFFFF"
                }
            ],
            "MainFragmentBackgroundColorEnable": false,
            "MainFragmentBackgroundColor": "000000",
            "FragmentItemViewTitleColorEnable": true,
            "FragmentItemViewTitleColor": "040404",
            "FragmentItemViewSubTitleColor": "8D8D8D",
            "FragmentItemViewBackgroundColor": "80FFFFFF",
            "ChatFragmentBackgroundColorEnable": false,
            "LeftChatBubbleColorEnable": false,
            "LeftChatBubbleColor": "FFE2ADAD",
            "RightChatBubbleColorEnable": false,
            "RightChatBubbleColor": "FF0ABFB7",
            "HidePullDownAppBrand": false,
            "DrawerEnable": true,
            "DrawerShowAvatar": true,
            "DrawerShowAccountInfo": true,
            "DrawerWidthCustom": true,
            "DrawerWidth": 160,
            "DrawerBackgroundColor": "FF315563",
            "DrawerItemViewTitleColor": "3C5E78",
            "DrawerNewMessageColor": "FA111F",
            "DrawerAccountInfoColor": "3C5E78",
            "DrawerListBgAlpha": 255,
            "DrawerListBgBlur": 0,
            "DrawerListOverlay": "#00FFFFFF",
            "DrawerBackgroundWhole": true,
            "DrawerWholeAlpha": 255,
            "DrawerWholeBgBlur": 0,
            "DrawerWholeOverlay": "#00FFFFFF",
            "DrawerList": {
                "items": [
                    {
                        "text": "åä¿¡ç‰‡",
                        "order": 0,
                        "icon": "ico.png",
                        "type": "qrcode",
                        "action": "",
                        "colorizeIcon": false,
                        "iconColor": "FF0D0D0D",
                        "enable": true
                    },
                    {
                        "text": "æ¢å·ç™»",
                        "order": 1,
                        "icon": "TabContacts.png",
                        "type": "switch_account",
                        "action": "",
                        "colorizeIcon": false,
                        "iconColor": "FF0B0B0B",
                        "enable": true
                    },
                    {
                        "text": "å‘ç¾¤èŠ",
                        "order": 2,
                        "icon": "ic_ç¾¤èŠ.png",
                        "type": "groupchat",
                        "action": "",
                        "colorizeIcon": false,
                        "iconColor": "FF050505",
                        "enable": true
                    },
                    {
                        "text": "å°ç¨‹åº",
                        "order": 3,
                        "icon": "icon_mini.png",
                        "type": "appbrand",
                        "action": "",
                        "colorizeIcon": false,
                        "iconColor": "FF0F0F0F",
                        "enable": true
                    },
                    {
                        "text": "æœä¸€æœ",
                        "order": 4,
                        "icon": "ic_æœç´¢.png",
                        "type": "search",
                        "action": "",
                        "colorizeIcon": false,
                        "iconColor": "FF080808",
                        "enable": true
                    },
                    {
                        "text": "æ‰«ä¸€æ‰«",
                        "order": 5,
                        "icon": "ic_æ‰«ä¸€æ‰«.png",
                        "type": "scan",
                        "action": "",
                        "colorizeIcon": false,
                        "iconColor": "FF080808",
                        "enable": true
                    },
                    {
                        "text": "æ”¶ä»˜æ¬¾",
                        "order": 7,
                        "icon": "ic_æ”¶ä»˜æ¬¾.png",
                        "type": "walletcoin",
                        "action": "",
                        "colorizeIcon": false,
                        "iconColor": "FF070707",
                        "enable": true
                    },
                    {
                        "text": "æœ‹å‹åœˆ",
                        "order": 8,
                        "icon": "ic_æœ‹å‹åœˆ.png",
                        "type": "timeline",
                        "action": "",
                        "colorizeIcon": false,
                        "iconColor": "FF030303",
                        "enable": true
                    },
                    {
                        "text": "å¾®é’±åŒ…",
                        "order": 9,
                        "icon": "ic_é’±åŒ….png",
                        "type": "wallet",
                        "action": "",
                        "colorizeIcon": false,
                        "iconColor": "FF070707",
                        "enable": true
                    },
                    {
                        "text": "åŠ å¥½å‹",
                        "order": 10,
                        "icon": "ic_åŠ å¥½å‹.png",
                        "type": "addfriend",
                        "action": "",
                        "colorizeIcon": false,
                        "iconColor": "FF0A0A0A",
                        "enable": true
                    },
                    {
                        "text": "å¾®è®¾ç½®",
                        "order": 11,
                        "icon": "è®¾ç½®.png",
                        "type": "settings",
                        "action": "",
                        "colorizeIcon": false,
                        "iconColor": "",
                        "enable": true
                    }
                ]
            },
            "DrawerItemViewBackgroundColor": "80FFFFFF",
            "DrawerItemViewHighlightColor": "FFE0E0E0",
            "DrawerItemViewSubTitleColor": "212121",
            "DrawerItemViewHighlightTextColor": "009688",
            "ChangeChatTextColor": false,
            "ChatTextColorLeft": "000000",
            "ChatTextColorRight": "000000",
            "BottomTabLabelTextColorEnable": true,
            "BottomTabLabelTextColorFocus": "46C01B",
            "BottomTabIconColorFocus": "00ffffff",
            "BottomTabIconColorMiddle": "00ffffff",
            "BottomTabLabelTextColorNormal": "061D17",
            "SplashImageEnable": true,
            "SplashImage": [
                {
                    "e": true,
                    "p": "80a9f1ba69cb01cde81354d04e6ebcb8.jpg",
                    "b": 0,
                    "c": "#00FFFFFF"
                }
            ],
            "FragmentItemViewStickyBackgroundColor": "80F7F3F7",
            "TabLayoutIconEnable": false,
            "BottomTabIconReplaceTextEnable": true,
            "BottomTabReplaceIconEnable": true,
            "FloatingActionMenuMoveEnable": false,
            "TabLayoutTextDiscover": "å‘ç°",
            "TabLayoutTextMe": "æˆ‘çš„",
            "TabLayoutTextContacts": "å¥½å‹",
            "BottomTabIconMeText": "æˆ‘çš„",
            "BottomTabIconContactsText": "å¥½å‹"
        };

        // æŒ‰é¡ºåºè‡ªåŠ¨é‡å‘½åæ–‡ä»¶
        function autoRenameFile(file, section) {
            // è·å–è¯¥ç±»å‹æ–‡ä»¶çš„é¢„å®šä¹‰åç§°åˆ—è¡¨
            const predefinedNames = fileMappings[section];
            
            // æŸ¥æ‰¾ç¬¬ä¸€ä¸ªæœªä½¿ç”¨çš„é¢„å®šä¹‰åç§°
            for (const predefinedName of predefinedNames) {
                if (!matchedFiles[section].has(predefinedName)) {
                    // æ ‡è®°è¯¥åç§°å·²ä½¿ç”¨
                    matchedFiles[section].add(predefinedName);
                    
                    // åˆ›å»ºæ–°çš„Fileå¯¹è±¡ï¼Œä¿æŒæ–‡ä»¶å†…å®¹ä½†ä¿®æ”¹æ–‡ä»¶å
                    return new File([file], predefinedName, { type: file.type });
                }
            }
            
            // å¦‚æœæ²¡æœ‰å¯ç”¨çš„é¢„å®šä¹‰åç§°ï¼Œä¿æŒåŸæ–‡ä»¶å
            return file;
        }

        // å¯¼èˆªåˆ‡æ¢åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            const navItems = document.querySelectorAll('.nav-item');
            const contentSections = document.querySelectorAll('.content-section');
            
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    const sectionId = this.getAttribute('data-section');
                    
                    // æ›´æ–°å¯¼èˆªæ¿€æ´»çŠ¶æ€
                    navItems.forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');
                    
                    // æ˜¾ç¤ºå¯¹åº”å†…å®¹åŒºåŸŸ
                    contentSections.forEach(section => section.classList.remove('active'));
                    document.getElementById(sectionId).classList.add('active');
                });
            });

            // ä¾§è¾¹æ åˆ‡æ¢
            const toggleBtn = document.getElementById('toggleBtn');
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');

            toggleBtn.addEventListener('click', function() {
                sidebar.classList.toggle('collapsed');
                mainContent.classList.toggle('expanded');
            });

            // åˆå§‹åŒ–æ–‡ä»¶åˆ—è¡¨æ˜¾ç¤º
            updateFileList('icons');
            updateFileList('images');
            updateFileList('settings');
        });

        // åˆ‡æ¢ç›¸åŒæ–‡ä»¶ä¸Šä¼ æ¨¡å¼
        function toggleSameFileUpload(groupId) {
            const checkbox = document.getElementById(`group${groupId}Same`);
            bottomTabGroups[groupId].same = checkbox.checked;
            
            // å¦‚æœå‹¾é€‰äº†ç›¸åŒæ–‡ä»¶ï¼Œä¸”å·²ç»ä¸Šä¼ äº†focusæ–‡ä»¶ï¼Œåˆ™è‡ªåŠ¨è®¾ç½®normalæ–‡ä»¶
            if (checkbox.checked && uploadedFiles.icons[bottomTabGroups[groupId].focus]) {
                uploadedFiles.icons[bottomTabGroups[groupId].normal] = uploadedFiles.icons[bottomTabGroups[groupId].focus];
                updateFileStatus(groupId, 'normal', 'å·²è‡ªåŠ¨è®¾ç½®');
                updateFileList('icons');
            }
        }

        // ä¸Šä¼ åº•éƒ¨æ ‡ç­¾æ–‡ä»¶
        function uploadBottomTabFile(groupId, type) {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.png';
            input.onchange = (e) => {
                if (e.target.files.length > 0) {
                    const file = e.target.files[0];
                    const targetName = bottomTabGroups[groupId][type];
                    
                    // æ ‡è®°è¯¥æ–‡ä»¶åå·²ä½¿ç”¨
                    matchedFiles.icons.add(targetName);
                    
                    // å­˜å‚¨æ–‡ä»¶
                    uploadedFiles.icons[targetName] = file;
                    
                    // å¦‚æœå‹¾é€‰äº†ç›¸åŒæ–‡ä»¶ï¼Œè‡ªåŠ¨è®¾ç½®å¦ä¸€ä¸ªæ–‡ä»¶
                    if (bottomTabGroups[groupId].same) {
                        const otherType = type === 'focus' ? 'normal' : 'focus';
                        const otherTargetName = bottomTabGroups[groupId][otherType];
                        matchedFiles.icons.add(otherTargetName);
                        uploadedFiles.icons[otherTargetName] = file;
                        updateFileStatus(groupId, otherType, 'å·²è‡ªåŠ¨è®¾ç½®');
                    }
                    
                    updateFileStatus(groupId, type, 'âœ“ å·²ä¸Šä¼ ');
                    updateFileList('icons');
                    showStatusMessage('icons', `æ–‡ä»¶ ${targetName} ä¸Šä¼ æˆåŠŸï¼`, 'success');
                }
            };
            input.click();
        }

        // æ›´æ–°æ–‡ä»¶çŠ¶æ€æ˜¾ç¤º
        function updateFileStatus(groupId, type, status) {
            const statusElement = document.getElementById(`group${groupId}${type.charAt(0).toUpperCase() + type.slice(1)}Status`);
            statusElement.textContent = status;
        }

        // å¤„ç†.nomediaæ–‡ä»¶ä¸Šä¼ 
        function handleNomediaUpload(event) {
            const file = event.target.files[0];
            if (file) {
                uploadedFiles.nomedia = file;
                showStatusMessage('icons', '.nomediaæ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼å°†åœ¨ä¸¤ä¸ªæ¨¡å—ä¸­åˆ›å»º', 'success');
                showStatusMessage('images', '.nomediaæ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼å°†åœ¨ä¸¤ä¸ªæ¨¡å—ä¸­åˆ›å»º', 'success');
            }
            event.target.value = '';
        }

        // ä¸Šä¼ å¿…ä¼ æ–‡ä»¶
        function uploadRequiredFile(filename, section) {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = section === 'settings' ? '.json' : '.png';
            input.onchange = (e) => {
                if (e.target.files.length > 0) {
                    const file = e.target.files[0];
                    // æ ‡è®°è¯¥æ–‡ä»¶åå·²ä½¿ç”¨
                    matchedFiles[section].add(filename);
                    handleFileUpload(file, section, filename);
                }
            };
            input.click();
        }

        // å¤„ç†å›¾æ ‡æ–‡ä»¶ä¸Šä¼  - ä½¿ç”¨é¡ºåºåŒ¹é…
        function handleIconsUpload(event) {
            const files = event.target.files;
            if (files.length === 0) return;
            
            showProgressBar('icons');
            let uploadedCount = 0;
            
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                // è‡ªåŠ¨é‡å‘½åé€»è¾‘ - æŒ‰é¡ºåºåŒ¹é…
                const processedFile = autoRenameFile(file, 'icons');
                
                if (processedFile) {
                    handleFileUpload(processedFile, 'icons', processedFile.name);
                    uploadedCount++;
                }
            }
            
            hideProgressBar('icons');
            if (uploadedCount > 0) {
                showStatusMessage('icons', `æˆåŠŸä¸Šä¼  ${uploadedCount} ä¸ªå›¾æ ‡æ–‡ä»¶`, 'success');
            }
            event.target.value = '';
        }

        // å¤„ç†å›¾åƒæ–‡ä»¶ä¸Šä¼  - ä½¿ç”¨é¡ºåºåŒ¹é…
        function handleImagesUpload(event) {
            const files = event.target.files;
            if (files.length === 0) return;
            
            showProgressBar('images');
            let uploadedCount = 0;
            
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                // è‡ªåŠ¨é‡å‘½åé€»è¾‘ - æŒ‰é¡ºåºåŒ¹é…
                const processedFile = autoRenameFile(file, 'images');
                
                if (processedFile) {
                    handleFileUpload(processedFile, 'images', processedFile.name);
                    uploadedCount++;
                }
            }
            
            hideProgressBar('images');
            if (uploadedCount > 0) {
                showStatusMessage('images', `æˆåŠŸä¸Šä¼  ${uploadedCount} ä¸ªå›¾åƒæ–‡ä»¶`, 'success');
            }
            event.target.value = '';
        }

        // å¤„ç†æ°”æ³¡æ–‡ä»¶ä¸Šä¼ 
        function handleBubbleUpload(event) {
            const files = event.target.files;
            if (files.length === 0) return;
            
            let uploadedCount = 0;
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                const originalName = file.name.toLowerCase();
                
                // è‡ªåŠ¨è¯†åˆ«æ°”æ³¡æ–‡ä»¶
                let targetName = null;
                if (originalName.includes('left') && originalName.includes('bubble')) {
                    targetName = 'left_bubble_9.png';
                } else if (originalName.includes('right') && originalName.includes('bubble')) {
                    targetName = 'right_bubble_9.png';
                }
                
                if (targetName) {
                    // æ ‡è®°è¯¥æ–‡ä»¶åå·²ä½¿ç”¨
                    matchedFiles.images.add(targetName);
                    handleFileUpload(file, 'images', targetName);
                    uploadedCount++;
                } else {
                    handleFileUpload(file, 'images', file.name);
                    uploadedCount++;
                }
            }
            
            if (uploadedCount > 0) {
                showStatusMessage('images', `æˆåŠŸä¸Šä¼  ${uploadedCount} ä¸ªæ°”æ³¡æ–‡ä»¶`, 'success');
            }
            event.target.value = '';
        }

        // å¤„ç†èŠå¤©ç¼–è¾‘èƒŒæ™¯ä¸Šä¼ 
        function handleChatEditUpload(event) {
            const files = event.target.files;
            if (files.length === 0) return;
            
            const file = files[0];
            // æ ‡è®°è¯¥æ–‡ä»¶åå·²ä½¿ç”¨
            matchedFiles.images.add('chatfooter_edit_bg.png');
            handleFileUpload(file, 'images', 'chatfooter_edit_bg.png');
            showStatusMessage('images', 'èŠå¤©ç¼–è¾‘èƒŒæ™¯ä¸Šä¼ æˆåŠŸï¼', 'success');
            
            event.target.value = '';
        }

        // å¤„ç†é…ç½®æ–‡ä»¶ä¸Šä¼ 
        function handleSettingsUpload(event) {
            const files = event.target.files;
            if (files.length === 0) return;
            
            const file = files[0];
            if (file.type === 'application/json' || file.name.toLowerCase().endsWith('.json')) {
                handleFileUpload(file, 'settings', 'settings.json');
                showStatusMessage('settings', 'é…ç½®æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼', 'success');
            } else {
                showStatusMessage('settings', 'è¯·ä¸Šä¼ æœ‰æ•ˆçš„JSONé…ç½®æ–‡ä»¶ï¼', 'error');
            }
            
            event.target.value = '';
        }

        // å¤„ç†æ–‡ä»¶ä¸Šä¼ 
        function handleFileUpload(file, section, targetName) {
            uploadedFiles[section][targetName] = file;
            updateFileList(section);
        }

        // æ›´æ–°æ–‡ä»¶åˆ—è¡¨æ˜¾ç¤º
        function updateFileList(section) {
            const fileList = document.getElementById(`${section}FileList`);
            const files = uploadedFiles[section];
            
            fileList.innerHTML = '';
            
            if (Object.keys(files).length === 0) {
                if (section === 'settings') {
                    fileList.innerHTML = '<div class="file-item"><div class="file-info"><span class="file-icon">â„¹ï¸</span><span class="file-name">æš‚æ— è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ï¼Œå°†ä½¿ç”¨é»˜è®¤é…ç½®</span></div></div>';
                } else {
                    fileList.innerHTML = '<div class="file-item"><div class="file-info"><span class="file-icon">â„¹ï¸</span><span class="file-name">æš‚æ— ä¸Šä¼ æ–‡ä»¶</span></div></div>';
                }
                return;
            }
            
            for (const filename in files) {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                
                fileItem.innerHTML = `
                    <div class="file-info">
                        <span class="file-icon">${getFileIcon(filename)}</span>
                        <span class="file-name">${filename}</span>
                    </div>
                    <div class="file-actions">
                        <button class="btn btn-secondary" onclick="removeFile('${section}', '${filename}')">åˆ é™¤</button>
                    </div>
                `;
                
                fileList.appendChild(fileItem);
            }
        }

        // è·å–æ–‡ä»¶å›¾æ ‡
        function getFileIcon(filename) {
            if (filename.endsWith('.png') || filename.endsWith('.jpg') || filename.endsWith('.jpeg') || filename.endsWith('.webp')) {
                return 'ğŸ–¼ï¸';
            } else if (filename.endsWith('.json')) {
                return 'âš™ï¸';
            } else {
                return 'ğŸ“„';
            }
        }

        // åˆ é™¤æ–‡ä»¶
        function removeFile(section, filename) {
            delete uploadedFiles[section][filename];
            // ä»å·²åŒ¹é…åˆ—è¡¨ä¸­ç§»é™¤
            if (matchedFiles[section]) {
                matchedFiles[section].delete(filename);
            }
            updateFileList(section);
            showStatusMessage(section, `å·²åˆ é™¤æ–‡ä»¶: ${filename}`, 'success');
        }

        // æ˜¾ç¤ºè¿›åº¦æ¡
        function showProgressBar(section) {
            const progressBar = document.getElementById(`${section}ProgressBar`);
            const progressFill = document.getElementById(`${section}ProgressFill`);
            
            progressBar.style.display = 'block';
            progressFill.style.width = '0%';
            
            let width = 0;
            const interval = setInterval(() => {
                if (width >= 100) {
                    clearInterval(interval);
                } else {
                    width++;
                    progressFill.style.width = width + '%';
                }
            }, 20);
        }

        // éšè—è¿›åº¦æ¡
        function hideProgressBar(section) {
            const progressBar = document.getElementById(`${section}ProgressBar`);
            const progressFill = document.getElementById(`${section}ProgressFill`);
            
            progressFill.style.width = '100%';
            
            setTimeout(() => {
                progressBar.style.display = 'none';
            }, 500);
        }

        // æ˜¾ç¤ºçŠ¶æ€æ¶ˆæ¯
        function showStatusMessage(section, message, type) {
            const statusMessage = document.getElementById(`${section}StatusMessage`);
            
            statusMessage.textContent = message;
            statusMessage.className = `status-message status-${type}`;
            statusMessage.style.display = 'block';
            
            setTimeout(() => {
                statusMessage.style.display = 'none';
            }, 3000);
        }

        // æŸ¥çœ‹é»˜è®¤é…ç½®
        function viewDefaultSettings() {
            alert('é»˜è®¤é…ç½®æ–‡ä»¶å†…å®¹:\n\n' + JSON.stringify(defaultSettings, null, 2));
        }

        // ç”Ÿæˆä¸»é¢˜åŒ…
        function generateTheme() {
            const modal = document.getElementById('downloadModal');
            const downloadBtn = document.getElementById('downloadBtn');
            const downloadDetails = document.getElementById('downloadDetails');
            const progressBar = document.getElementById('downloadProgressBar');
            const currentFile = document.getElementById('currentFile');
            const progressPercent = document.getElementById('progressPercent');
            
            modal.style.display = 'flex';
            downloadBtn.style.display = 'none';
            progressBar.style.width = '0%';
            progressPercent.textContent = '0%';
            
            // æ¨¡æ‹Ÿæ‰“åŒ…è¿›åº¦
            let progress = 0;
            const totalSteps = 5;
            
            const progressInterval = setInterval(() => {
                progress += 20;
                progressBar.style.width = progress + '%';
                progressPercent.textContent = progress + '%';
                
                switch (progress) {
                    case 20:
                        currentFile.textContent = 'æ­£åœ¨æ”¶é›†å›¾æ ‡æ–‡ä»¶...';
                        break;
                    case 40:
                        currentFile.textContent = 'æ­£åœ¨æ”¶é›†å›¾åƒæ–‡ä»¶...';
                        break;
                    case 60:
                        currentFile.textContent = 'æ­£åœ¨å¤„ç†é…ç½®æ–‡ä»¶...';
                        break;
                    case 80:
                        currentFile.textContent = 'æ­£åœ¨åˆ›å»ºç›®å½•ç»“æ„...';
                        break;
                    case 100:
                        currentFile.textContent = 'æ­£åœ¨å‹ç¼©æ–‡ä»¶...';
                        break;
                }
                
                if (progress >= 100) {
                    clearInterval(progressInterval);
                    setTimeout(() => {
                        createAndDownloadZip();
                        downloadDetails.textContent = 'ä¸»é¢˜åŒ…ç”Ÿæˆå®Œæˆï¼';
                        downloadBtn.style.display = 'block';
                    }, 500);
                }
            }, 200);
        }

        // åˆ›å»ºå¹¶ä¸‹è½½ZIPæ–‡ä»¶
        function createAndDownloadZip() {
            const zip = new JSZip();
            
            // åˆ›å»ºiconsæ–‡ä»¶å¤¹
            const iconsFolder = zip.folder("icons");
            for (const filename in uploadedFiles.icons) {
                const file = uploadedFiles.icons[filename];
                iconsFolder.file(filename, file);
            }
            
            // åˆ›å»ºimagesæ–‡ä»¶å¤¹
            const imagesFolder = zip.folder("images");
            for (const filename in uploadedFiles.images) {
                const file = uploadedFiles.images[filename];
                imagesFolder.file(filename, file);
            }
            
            // æ·»åŠ .nomediaæ–‡ä»¶åˆ°iconså’Œimagesæ–‡ä»¶å¤¹
            if (uploadedFiles.nomedia) {
                iconsFolder.file(".nomedia", uploadedFiles.nomedia);
                imagesFolder.file(".nomedia", uploadedFiles.nomedia);
            } else {
                // å¦‚æœæ²¡æœ‰ä¸Šä¼ .nomediaæ–‡ä»¶ï¼Œåˆ›å»ºç©ºçš„.nomediaæ–‡ä»¶
                iconsFolder.file(".nomedia", "");
                imagesFolder.file(".nomedia", "");
            }
            
            // æ·»åŠ settings.jsonæ–‡ä»¶
            let settingsContent;
            if (uploadedFiles.settings['settings.json']) {
                // ä½¿ç”¨ç”¨æˆ·ä¸Šä¼ çš„é…ç½®æ–‡ä»¶
                const file = uploadedFiles.settings['settings.json'];
                const reader = new FileReader();
                reader.onload = function(e) {
                    settingsContent = e.target.result;
                    zip.file("settings.json", settingsContent);
                    generateZipFile(zip);
                };
                reader.readAsText(file);
            } else {
                // ä½¿ç”¨é»˜è®¤é…ç½®æ–‡ä»¶
                settingsContent = JSON.stringify(defaultSettings, null, 2);
                zip.file("settings.json", settingsContent);
                generateZipFile(zip);
            }
        }

        // ç”ŸæˆZIPæ–‡ä»¶
        function generateZipFile(zip) {
            zip.generateAsync({type: "blob"}).then(function(content) {
                saveAs(content, "theme_package.zip");
            });
        }

        // å…³é—­ä¸‹è½½æ¨¡æ€æ¡†
        function closeDownloadModal() {
            const modal = document.getElementById('downloadModal');
            modal.style.display = 'none';
        }
    </script>
</body>
</html>